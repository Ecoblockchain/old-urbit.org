<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      centis &middot; Urbit
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">

  <!-- Icons -->

   <link rel="shortcut icon" href="/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <img src="/public/urbit_logo_ur.svg">
      <br>
      <h1>Urbit</h1>
      <p class="lead">a personal cloud computer</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
        <a href="/">What is Urbit?</a>
      </li>

      

      
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/about/">About</a>
            </li>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/blog/">Blog</a>
            </li>
          
        
      
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/doc/">Documentation</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/setup/">Setup</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <li class="sidebar-nav-item"><a href="https://github.com/urbit/urbit">GitHub</a></li>
      <li class="sidebar-nav-item"><a href="https://groups.google.com/forum/#!forum/urbit-dev">Mailing List</a></li>
      <li class="sidebar-nav-item">Cooling at 544 Kelvin</li>
      <li>Last Continuity Breach: <a href="/blog/2014/01/06/continuity/">~2014.1.6</a></li>
    </ul>
    <p>&copy; 2014.  All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="subpage">
  <h1 class="subpage-title">centis</h1>
  <p><code>%=</code>, <code>centis</code>, <code>[%cnts p=wing q=tram]</code> is a natural hoon that
evaluates <code>p</code> with the changes specified in <code>q</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%cnts p=wing q=tram]
  ==
++  tram  (list ,[p=wing q=twig]) 
</code></pre></div>
<h3>Regular form (tall)</h3>

<p>Kingside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%=  p
  p.i.q    q.i.q
  p.i.t.q  q.i.t.q
==
</code></pre></div>
<p>Queenside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%=    p
    p.i.q    
  q.i.q
    p.i.t.q  
  q.i.t.q
==
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">%=(p p.i.q q.i.q, p.i.t.q q.i.t.q)
</code></pre></div>
<h3>Irregular form</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">p(p.i.q q.i.q, p.i.t.q q.i.t.q)
</code></pre></div>
<h3>Compilation</h3>

<p>You are not expected to understand this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-    gen
      [%cnts *]  
    =+  lar=(foil (seek %read p.gen))
    =+  mew=(snub q.gen)
    =-  [(nice p.yom) ?:(=(0 p.q.lar) q.yom [%9 p.q.lar q.yom])]
    ^=  yom
    =+  hej=*(list ,[p=axis q=nock])
    |-  ^-  [p=type q=nock]
    ?~  mew
      [(fire q.q.lar) (hike p.lar hej)]
    =+  zil=^$(gen q.i.mew, gol %noun)
    =+  wip=(tock p.i.mew p.zil q.q.lar)
    $(mew t.mew, q.q.lar q.wip, hej [[p.wip q.zil] hej])
  ==
::
++  fino
  |=  [dep=@ud way=?(%read %rite %both %free) cog=term]
  =+  gil=*(set type)
  |-  ^-  [p=@ud q=(unit post)]
  ?+    sut  [dep ~]
      [%bull *]
    ?.  =(cog p.p.sut)
      $(sut q.sut)
    ?.  ?=(0 dep)
      $(dep (dec dep), sut q.sut)
    [0 ~ 1 %2 p.sut q.sut]
  ::
      [%cell *]
    =+  taf=$(sut p.sut)
    ?~  q.taf
      =+  bov=$(dep p.taf, sut q.sut)
      ?~  q.bov
        bov
      [p.bov ~ (peg 3 p.u.q.bov) q.u.q.bov]
    [p.taf ~ (peg 2 p.u.q.taf) q.u.q.taf]
  ::
      [%core *]
    =+  zem=(look cog q.r.q.sut)
    =&gt;  ^+(. ?:(|(=(~ zem) =(0 dep)) . .(dep (dec dep), zem ~)))
    ?^  zem
      [dep ~ 1 [%1 (peg 2 p.u.zem) [[sut(p.q %gold) q.u.zem] ~]]]
    =+  taf=$(sut p.sut)
    ?~  q.taf
      taf
    ?.  (park way p.u.q.taf)
      ~|(%find-park !!)
    [p.taf ~ (peg 3 p.u.q.taf) q.u.q.taf]
  ::
      [%cube *]
    $(sut repo)
  ::
      [%face *]
    ?:  =(cog p.sut)
      ?.  ?=(0 dep)
        [(dec dep) ~]
      [0 ~ 1 %0 q.sut]
    [dep ~]
  ::
      [%fork *]
    ~|  %fork
    ?:  (~(has in gil) q.sut)
      $(sut p.sut)
    ?:  (~(has in gil) p.sut)
      $(sut q.sut)
    =+  [hax=$(sut p.sut) yor=$(sut q.sut)]
    ~|  %find-fork
    ?:  =(hax yor)
      hax
    ?&gt;  &amp;(?=(^ q.hax) ?=(^ q.yor) =(p.hax p.yor) =(p.u.q.hax p.u.q.yor))
    :-   p.hax
    ?-  -.q.u.q.hax
      0  ?&gt;  ?=(0 -.q.u.q.yor)
         [~ p.u.q.hax %0 (fork p.q.u.q.hax p.q.u.q.yor)]
      1  ?&gt;  &amp;(?=(1 -.q.u.q.yor) =(p.q.u.q.yor p.q.u.q.hax))
         [~ p.u.q.hax %1 p.q.u.q.hax (weld q.q.u.q.hax q.q.u.q.yor)]
      2  ?&gt;  ?&amp;  ?=(2 -.q.u.q.yor) 
                 =(p.p.q.u.q.hax p.p.q.u.q.yor)
                 =(q.p.q.u.q.hax q.p.q.u.q.yor)
                 =(r.p.q.u.q.hax r.p.q.u.q.yor)
             ==
         :*  ~
             p.u.q.hax
             %2
             :*  p.p.q.u.q.hax 
                 q.p.q.u.q.hax 
                 r.p.q.u.q.hax 
                 (fork s.p.q.u.q.hax s.p.q.u.q.yor)
             ==
             (fork q.q.u.q.hax q.q.u.q.yor)
         ==
    ==
  ::
      [%hold *]
    ?:  (~(has in gil) sut)
      [dep ~]
    $(gil (~(put in gil) sut), sut repo)
  ==
::
++  fink
  ~/  %fink
  |=  [dep=@ud way=?(%read %rite %both %free) cog=term]
  ^-  port
  ~_  (dunk &#39;type&#39;)
  ~_  (show [%c &#39;find-limb&#39;] ?:(=(%$ cog) &#39;$&#39; [%a cog]))
  =+  hoq=(fino dep way cog)
  ?~  q.hoq
    ~|(%find-none !!)
  (flee u.q.hoq)
::
++  seek
  ~/  %seek
  |=  [way=?(%read %rite %both %free) hyp=wing]
  ^-  port
  ?~  hyp
    [1 %&amp; sut]
  =&gt;  .(i.hyp ?^(i.hyp i.hyp [%| p=0 q=i.hyp]))
  =+  zar=$(hyp t.hyp)
  =+  ^=  syp
      ?-    -.q.zar
          &amp;  p.q.zar
          |  (fire (turn q.q.zar |=([p=type q=foot] [p [%ash ~ 1]])))
      ==
  ?-    i.hyp
      [&amp; *]
    [(peg p.zar p.i.hyp) %&amp; (peek(sut syp) way p.i.hyp)]
  ::
      [| *]
    =&gt;  .(sut syp)
    =+  hud=(fink p.i.hyp way q.i.hyp)
    [(peg p.zar p.hud) q.hud]
  ==
::
++  snub
  ~/  %snub
  |=  har=(list ,[p=wing q=twig])
  ^-  (list ,[p=wing q=twig])
  (turn har |=([a=wing b=twig] [(flop a) b]))
::
++  tock
  ~/  %tock
  |=  [peh=wing mur=type men=(list ,[p=type q=foot])]
  ^-  [p=axis q=(list ,[p=type q=foot])]
  =-  [(need p.wib) q.wib]
  ^=  wib
  |-  ^-  [p=(unit axis) q=(list ,[p=type q=foot])]
  ?@  men
    [*(unit axis) ~]
  =+  geq=(tack(sut p.i.men) peh mur)
  =+  mox=$(men t.men)
  [(mate p.mox `_p.mox`[~ p.geq]) [[q.geq q.i.men] q.mox]]
::
++  fire
  ~/  %fire
  |=  hag=(list ,[p=type q=foot])
  ^-  type
  ?:  ?=([[* [%elm ~ 1]] ~] hag)
    p.i.hag
  :-  %hold
  %+  turn
    hag.$
  |=  [p=type q=foot]
  ?.  ?=([%core *] p)
    ~|(%fire-core !!)
  =+  dox=[%core q.q.p q.p]
  ?:  ?=(%ash -.q)
    ~|  %fire-ash
    ::  ~_  (dunk(sut [%cell q.q.p p.p]) %fire-dry)
    ?&gt;  ?|(!vet (nest(sut q.q.p) &amp; p.p))
    [dox p.q]
  ~|  [%fire-odd -.q]
  ?&gt;  ?=(%elm -.q)
  ~|  %fire-elm
  ::  ~_  (dunk(sut [%cell q.q.p p.p]) %fire-wet)
  ?&gt;  ?|  !vet
          (~(has in rib) [sut dox p.q])
          (mull(sut p, rib (~(put in rib) [sut dox p.q])) %noun dox p.q)
      ==
  [p p.q]
::
++  foil
  ~/  %foil
  |=  pok=port
  ^-  prop
  ?-  -.q.pok
    &amp;  [p.pok [~ [[p.q.pok [%elm ~ 1]] ~]]]
    |  [p.pok [p.q.pok q.q.pok]]
  ==
</code></pre></div>
<h3>Notes</h3>

<p>See the explanation in Chapter 7.</p>

</div>

    </div>

  </body>
</html>
