<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      zap &middot; Urbit
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">

  <!-- Icons -->

   <link rel="shortcut icon" href="/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <img src="/public/urbit_logo_ur.svg">
      <br>
      <h1>Urbit</h1>
      <p class="lead">a personal cloud computer</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
        <a href="/">What is Urbit?</a>
      </li>

      

      
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/about/">About</a>
            </li>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/blog/">Blog</a>
            </li>
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/dev/">Developer</a>
            </li>
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/doc/">Documentation</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/setup/">Setup</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <li class="sidebar-nav-item"><a href="https://github.com/urbit/urbit">GitHub</a></li>
      <li class="sidebar-nav-item"><a href="https://groups.google.com/forum/#!forum/urbit-dev">Mailing List</a></li>
      <li class="sidebar-nav-item">Cooling at 544 Kelvin</li>
      <li>Last Continuity Breach: <a href="/blog/2014/01/06/continuity/">~2014.1.6</a></li>
    </ul>
    <p>urbit@urbit.org</p>
  </div>
</div>


    <div class="content container">
      <div class="subpage">
  <h1 class="subpage-title">zap</h1>
  <h1>special: zap, <code>!</code></h1>

<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpcb/">zapcab</a></h2>

<p><code>!_</code>,<code>zapcab</code>, <code>[%zpcb p=spot q=twig]</code> is a natural hoon that puts
debugging information in the stack trace.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  twig
    [%zpcb p=spot q=twig] 
  ==
++  spot  ,[p=path q=pint]
++  path  (list span) 
++  span  ,@ta
++  pint  ,[p=[p=@ q=@] q=[p=@ q=@]]
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-    gen
      [%zpcb *]  
    ~_  (show %o p.gen)
    =+  hum=$(gen q.gen)
    [p.hum [%10 [%spot %1 p.gen] q.hum]]
  ==
</code></pre></div>
<h3>Notes</h3>

<p>The parser produces <code>%zpcb</code> only within a <code>!:</code>.  <code>%zpcb</code> will
also hose your tail call elimination, so beware.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpfs/">zapfas</a></h2>

<p><code>!/</code>, <code>zapfas</code>, <code>[%zpfs p=twig q=twig]</code> is a natural hoon that should
never be compiled.  When compiled with error checking turned on,
it reports its subject as an error.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%zpfs p=twig]
  ==
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-    gen
      [%zpfs *]  
    ?:  vet
      ~_  (dunk(sut (play p.gen)) &#39;lost&#39;)
      ~|(%mint-lost !!)
    [%void [%0 0]]
  ==
</code></pre></div>
<h3>Notes</h3>

<p>We use <code>%zpfs</code> in <code>?-</code> to make sure all cases are handled.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpgr/">zapgar</a></h2>

<p><code>!&gt;</code>, <code>zapgar</code>, <code>[%zpgr p=twig]</code> is a synthetic hoon that
produces a vase (a [type noun] cell) with the value <code>p</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%zpgr p=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!&gt;  p
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!&gt;(p)
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%zpgr *]
    [%cnhp [%cnzy %onan] [%zpsm [%bctr [%herb [%cnzy %abel]]] p.gen] ~]
  ==
</code></pre></div>
<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpsm/">zapsem</a></h2>

<p><code>!;</code>, <code>zapsem</code>, <code>[%zpsm p=twig q=twig]</code> is a natural hoon that
produces the product of twig <code>q</code> as a <code>[type noun]</code> pair, with
twig <code>p</code> defining the type of the type.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%zpsm p=twig q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!;  p
q
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!;(p q)
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-  gen
      [%zpsm *]  
    =+  vos=$(gol %noun, gen q.gen)
    [(nice (cell (play p.gen) p.vos)) (cons [%1 p.vos] q.vos)]
  ==
</code></pre></div>
<h3>Notes</h3>

<p>The compiler should verify that <code>p</code> is actually the type of the
types it uses, but doesn&#39;t at present.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpts/">zaptis</a></h2>

<p><code>!=</code>, <code>zaptis</code>, <code>[%zpts p=twig]</code> is a natural hoon that produces
the formula of twig <code>p</code> as a noun.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%zpts p=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!=  p
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!=(p) 
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-  gen
    [%zpts *]  [(nice %noun) [%1 q:$(vet |, gen p.gen)]]
  ==
</code></pre></div>
<h3>Notes</h3>

<p>Arguably should be changed to use a type, like %zpsm and %zpcm.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpwt/">zapwut</a></h2>

<p><code>!?</code>, <code>zapwut</code>, <code>[%zpwt p=twig]</code> is a synthetic hoon that
enforces a Hoon version restriction.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%zpwt p=$|(p=@ [p=@ q=@]) q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>

<p>To declare code that runs only in Hoon 164K or newer:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!?  164
q
</code></pre></div>
<p>To declare code that runs only in 164K through 161K:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!?  [164 161] 
q
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%zpwt *]
    ?:  ?:  ?=(@ p.gen)
          (lte stub p.gen)
        &amp;((lte stub p.p.gen) (gte stub q.p.gen))
      q.gen 
    ~|([%stub-fail stub p.gen] !!)
  ==
</code></pre></div>
<hr>

<h2><a href="/bestiary/hoon/rune/zap/zpzp/">zapzap</a></h2>

<p><code>!!</code>, <code>zapzap</code>, <code>[%zpzp p=~]</code> is a natural hoon that
crashes every time.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%zpzp p=~]
  ==
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">!!
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-  gen
    [%zpzp *]  [%void [%0 0]]
  ==
</code></pre></div>
<h3>Notes</h3>

<p>Crashing in Hoon is the normal way to respond to an error.</p>

<hr>

</div>

    </div>

  </body>
</html>
