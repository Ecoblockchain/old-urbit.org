<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      tis &middot; Urbit
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">

  <!-- Icons -->

   <link rel="shortcut icon" href="/favicon.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <img src="/public/urbit_logo_ur.svg">
      <br>
      <h1>Urbit</h1>
      <p class="lead">a personal cloud computer</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
        <a href="/">What is Urbit?</a>
      </li>

      

      
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/about/">About</a>
            </li>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/blog/">Blog</a>
            </li>
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/dev/">Developer</a>
            </li>
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/doc/">Documentation</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
            <li class="sidebar-nav-item">
              <a href="/setup/">Setup</a>
            </li>
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <li class="sidebar-nav-item"><a href="https://github.com/urbit/urbit">GitHub</a></li>
      <li class="sidebar-nav-item"><a href="https://groups.google.com/forum/#!forum/urbit-dev">Mailing List</a></li>
      <li class="sidebar-nav-item">Cooling at 544 Kelvin</li>
      <li>Last Continuity Breach: <a href="/blog/2014/01/06/continuity/">~2014.1.6</a></li>
    </ul>
    <p>urbit@urbit.org</p>
  </div>
</div>


    <div class="content container">
      <div class="subpage">
  <h1 class="subpage-title">tis</h1>
  <h1>compositions: tis, <code>=</code></h1>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tsbr/">tisbar</a></h2>

<p><code>=|</code>, <code>tisbar</code>, <code>[%tsbr p=tile q=twig]</code> is a synthetic hoon that
pushes <code>~(bunt al p)</code> on the subject and sends it to <code>q</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tsbr p=tile q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=|  p
q
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=|(p q)
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-  gen
    [%tsbr *]  [%tsls ~(bunt al p.gen) q.gen]
  ==
</code></pre></div>
<h3>Notes</h3>

<p><code>=|(p q)</code> is the same as <code>=+(_p q)</code>.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tscl/">tiscol</a></h2>

<p><code>=:</code>, <code>tiscol</code>, <code>[%tscl p=tram q=twig]</code> is a synthetic hoon that
produces <code>q</code> with the subject modified by <code>p</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tscl p=tram q=twig] 
  ==
++  tram  (list ,[p=wing q=twig])
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=:  p.i.p      q.i.p
    p.i.t.p    q.i.t.p
    p.i.t.t.p  q.i.t.t.p
  ==
q
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%tscl *]
    [%tsgr [%cncb [[~ 1] ~] p.gen] q.gen]
  ==
</code></pre></div>
<h3>Notes</h3>

<p><code>%tscl</code> uses <code>%cncb</code>, so it cannot change the subject type.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tsdt/">tisdot</a></h2>

<p><code>=.</code>, <code>tisdot</code>, <code>[%tsdt p=wing q=twig r=twig]</code> is a synthetic 
hoon that produces <code>r</code> with <code>p</code> in the subject set to <code>q</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tsdt p=wing q=twig r=twig
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>

<p>Kingside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=.  p 
  q
r
</code></pre></div>
<p>Queenside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=.  p  q
r
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=.(p q r)
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%tsdt *]
    [%tsgr [%cncb [[~ 1] ~] p.gen] q.gen]
  ==
</code></pre></div>
<h3>Notes</h3>

<p><code>%tsdt</code> uses <code>%cncb</code>, so it cannot change the subject type.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tsgl/">tisgal</a></h2>

<p><code>=&lt;</code>, <code>tisgal</code>, <code>[%tsgl p=twig q=twig]</code> is a synthetic hoon that
uses the product of <code>q</code> as the subject of <code>p</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tsgl p=twig q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=&lt;  p
q
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=&lt;(p q)
</code></pre></div>
<h3>Irregular form</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">p:q
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-  gen
    [%tsgl *]  [%tsgr q.gen p.gen]
  ==
</code></pre></div>
<h3>Notes</h3>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tsgr/">tisgar</a></h2>

<p><code>=&gt;</code>, <code>tisgar</code>, <code>[%tsgr p=twig q=twig]</code> is a natural hoon that
uses the product of <code>p</code> as the subject of <code>q</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tsgr p=twig q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=&gt;  p
q
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=&gt;(p q)
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-    gen
      [%tsgr *]  
    =+  fid=$(gen p.gen, gol %noun)
    =+  dov=$(sut p.fid, gen q.gen)
    [p.dov (comb q.fid q.dov)]
  ==

++  comb
  |=  [mal=nock buz=nock]
  ^-  nock
  ?:  ?&amp;(?=([0 *] mal) !=(0 p.mal))
    ?:  ?&amp;(?=([0 *] buz) !=(0 p.buz))
      [%0 (peg p.mal p.buz)]
    ?:  ?=([2 [0 *] [0 *]] buz)
      [%2 [%0 (peg p.mal p.p.buz)] [%0 (peg p.mal p.q.buz)]]
    [%7 mal buz]
  ?:  ?=([^ [0 1]] mal)
    [%8 p.mal buz]
  ?:  =([0 1] buz)
    mal
  [%7 mal buz]
</code></pre></div>
<h3>Notes</h3>

<p>Observe that <code>=&gt;</code> strives to be at least slightly non-naive in
composing Nock formulas.  This is why <code>=+</code> can be a synthetic
hoon, despite matching Nock <code>8</code>.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tshp/">tishep</a></h2>

<p><code>=-</code>, <code>tishep</code>, <code>[%tshp p=twig q=twig]</code> is a synthetic hoon that
pushes <code>q</code> on the subject and sends it to <code>p</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tshp p=twig q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=-  p
q
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=-(p q)
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%tshp *]  [%tsls q.gen p.gen]
  ==
</code></pre></div>
<h3>Notes</h3>

<p><code>=-</code>, the opposite of <code>=+</code>, is very useful for code arrangement
when <code>q</code> is much bigger than <code>p</code>.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tskt/">tisket</a></h2>

<p><code>=^</code>, <code>tisket</code>, <code>[%tskt p=twig q=twig r=twig s=twig]</code> is a synthetic 
hoon that handles a product which is a cell of a new result, and
a mutation to the subject.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tskt p=twig q=twig r=twig s=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>

<p>Kingside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=^    p 
    q
  r
s
</code></pre></div>
<p>Queenside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=^  p  q
  r
s
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=^(p q r s)
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%tskt *]
    =+  cog=rusk(gen p.gen)                           ::
    =+  wuy=(weld rake(gen q.gen) `wing`[%v ~])       ::
    :+  %tsgr  [%ktts %v ~ 1]                         ::  =&gt;  v=.
    :+  %tsls  [%ktts %a %tsgr [%cnzy %v] r.gen]      ::  =+  a==&gt;(v \r.gen)
    :^  %tsdt  wuy  [%tsgl [~ 3] [%cnzy %a]]          ::  =.  \wuy  +.a
    :+  %tsgr  :-  :+  %ktts  cog                     ::  =&gt;  :-  ^=  \cog
                   [%tsgl [~ 2] [%cnzy %a]]           ::          -.a
               [%cnzy %v]                             ::      v
    s.gen                                             ::  s.gen
  ==
</code></pre></div>
<h3>Notes</h3>

<p>Language change alert: <code>p</code> should be a term, <code>q</code> should be a wing.</p>

<p>We use <code>=^</code> for the common pattern of a state machine which
exposes a gate that produces a cell <code>[result new-state]</code>.  When
the state machine is part of the subject - at wing <code>q</code> - we often
want to push the result under a name, as in <code>=+  p=result</code>, and
continue to twig <code>s</code> with the change <code>=.  q  new-state</code>.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tsls/">tislus</a></h2>

<p><code>=+</code>, <code>tislus</code>, <code>[%tsls p=twig q=twig]</code> is a synthetic hoon that
pushes <code>p</code> on the subject and sends it to <code>q</code>.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tsls p=twig q=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=+  p
q
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=+(p q)
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-  gen
    [%tsls *]  [%tsgr [p.gen [~ 1]] q.gen]
  ==
</code></pre></div>
<h3>Notes</h3>

<p><code>%tsls</code> is the Hoon equivalent of Nock <code>8</code>.  It is a synthetic
hoon, though, because we recognize the Nock pattern and optimize
it in code generation.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tssg/">tissig</a></h2>

<p><code>=~</code>, <code>tissig</code>, <code>[%tssg p=tusk]</code> is a synthetic hoon that
composes a list of twigs.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tssg p=tusk]
  ==
++  tusk  (list twig)
</code></pre></div>
<h3>Regular form (tall)</h3>

<p>Kingside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">  =~  
i.p
i.t.p
i.t.t.p
  ==
</code></pre></div>
<p>Queenside:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=~  i.p
    i.t.p
    i.t.t.p
==
</code></pre></div>
<h3>Expansion</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  open
  ^-  twig
  ?-    gen
      [%tssg *]
  ==
</code></pre></div>
<h3>Notes</h3>

<p><code>=~</code> is usually used for formatting high-level reefs without
losing base indentation.</p>

<hr>

<h2><a href="/bestiary/hoon/rune/tis/tstr/">tistar</a></h2>

<p><code>=*</code>, <code>tistar</code>, <code>[%tstr p=term q=wing r=twig]</code> is a natural hoon
that creates a <code>%bull</code>, or alias, type.</p>

<h3>Definition</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  twig  
  $%  [%tstr p=term q=wing r=twig]
  ==
</code></pre></div>
<h3>Regular form (tall)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=*  p  q
r
</code></pre></div>
<h3>Regular form (wide)</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">=*(p q r)
</code></pre></div>
<h3>Compilation</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">++  mint
  ?-  gen
    [%tstr *]  $(gen r.gen, sut (busk p.gen q.gen))
  ==
::
++  busk
  ~/  %busk
  |=  [cog=term hyp=wing]
  ^-  type
  (bull [cog hyp (seep %both hyp)] sut)
::
++  bull
  |=  [bid=twin der=type]
  ^-  type
  ?:(|(=(%void der) =(%void s.bid)) %void [%bull bid der])
</code></pre></div>
<h3>Notes</h3>

<p>The <code>%bull</code> stem will be discussed more in chapter 11.  But
essentially, it wraps the subject with an alias in which <code>p</code>
means <code>q</code>.</p>

<hr>

</div>

    </div>

  </body>
</html>
